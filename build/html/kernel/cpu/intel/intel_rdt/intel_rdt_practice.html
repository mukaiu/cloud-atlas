<!DOCTYPE html>
<html class="writer-html5" lang="zh" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intel RDTå®è·µ &mdash; Cloud Atlas: Discovery beta æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=fd3f3429" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=8534f863"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../../../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../../../search.html" />
    <link rel="copyright" title="ç‰ˆæƒæ‰€æœ‰" href="../../../../copyright.html" />
    <link rel="next" title="Intel QuickAssist æŠ€æœ¯(Intel QAT)" href="../intel_qat/index.html" />
    <link rel="prev" title="Intelèµ„æºè°ƒé…æŠ€æœ¯(Intel RDT)æ¶æ„" href="intel_rdt_arch.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Cloud Atlas: Discovery
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../studio/index.html">Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devops/index.html">DevOps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kvm/index.html">KVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ceph/index.html">Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gluster/index.html">Gluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ovirt/index.html">oVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openstack/index.html">OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kubernetes/index.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../k8s_dev/index.html">Kubernetes Develop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rancher/index.html">Rancher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openshift/index.html">OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sql/index.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/index.html">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/index.html">MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pgsql/index.html">PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nosql/index.html">NoSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_service/index.html">Infra-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_search/index.html">Infra-Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web/index.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../info_service/index.html">Info-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../big_data/index.html">Big Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../machine_learning/index.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drone/index.html">Drone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../linux/index.html">Linux</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Kernel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../startup/index.html">Kernelèµ·æ­¥</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">CPU</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../cpu_prefetch.html">CPUé¢„å–</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Intel CPUæ¶æ„</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../cpufreq/index.html">CPUé¢‘ç‡ æ€§èƒ½ä¼¸ç¼©(Performance Scaling)</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Intel Resource Director Technology(RDT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel_qat/index.html">Intel QuickAssist æŠ€æœ¯(Intel QAT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel_sgx/index.html">Intel Software Guard Extensions(SGX)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel_vroc/index.html">Intel Virtual RAID on CPU (Intel VROC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel_rst/index.html">Intel Rapid Storage Technology(Intel RST)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xeon_e5/index.html">Intel XEON E5ç³»åˆ—å¤„ç†å™¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xeon_e/index.html">Intel XEON Eç³»åˆ—å¤„ç†å™¨</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel_core/index.html">Intel Coreå¤„ç†å™¨</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../amd/index.html">AMD CPUæ¶æ„</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cpu_fan.html">CPUæ•£çƒ­å™¨</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../scheduler/index.html">Linuxè°ƒåº¦å™¨</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cgroup/index.html">Kernel Cgroup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../process/index.html">å†…æ ¸è¿›ç¨‹ç®¡ç†</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../core_api/index.html">kernelæ ¸å¿ƒAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../flame_graph.html">ç«ç„°å›¾</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kms.html">KMS (Kernel mode setting)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accounting/index.html">å†…æ ¸è®°è´¦</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../filesystem/index.html">å†…æ ¸æ–‡ä»¶ç³»ç»Ÿ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../lsm/index.html">Linux å®‰å…¨æ¨¡å—(Linux Security Modules, LSM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ebpf/index.html">eBPF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../perf/index.html">Linux perfæ€§èƒ½åˆ†æå·¥å…·</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/index.html">Linuxå†…æ ¸ç®¡ç†</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../memory/index.html">Linuxå†…å­˜ç®¡ç†</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../network/index.html">Linuxå†…æ ¸ç½‘ç»œå®ç°</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../power/index.html">å†…æ ¸ç”µæºç®¡ç†</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tracing/index.html">Linuxå†…æ ¸è¿½è¸ª</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../distributed_system/index.html">Distributed System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../shell/index.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../django/index.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/index.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nodejs/index.html">Node.js</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../clang/index.html">C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../golang/index.html">Go</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../swift/index.html">Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rust/index.html">Rust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ruby/index.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../lua/index.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../raspberry_pi/index.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../android/index.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bsd/index.html">BSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../freebsd/index.html">FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../apple/index.html">Apple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../real/index.html">Real</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../management/index.html">Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../life/index.html">Life</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../aboutme.html">å…³äºä½œè€…</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../donate.html">æèµ </a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../thanks.html">æ„Ÿè°¢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../appendix/index.html">é™„å½•</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Cloud Atlas: Discovery</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Kernel</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">CPU</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Intel CPUæ¶æ„</a></li>
          <li class="breadcrumb-item"><a href="index.html">Intel Resource Director Technology(RDT)</a></li>
      <li class="breadcrumb-item active">Intel RDTå®è·µ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/kernel/cpu/intel/intel_rdt/intel_rdt_practice.rst.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="intel-rdt">
<span id="intel-rdt-practice"></span><h1>Intel RDTå®è·µ<a class="headerlink" href="#intel-rdt" title="Link to this heading">ïƒ</a></h1>
<p>æˆ‘ä»¬åœ¨ <a class="reference internal" href="intel_rdt_arch.html#intel-rdt-arch"><span class="std std-ref">Intelèµ„æºè°ƒé…æŠ€æœ¯(Intel RDT)æ¶æ„</span></a> å¯¹Intel RDTæ¶æ„æœ‰äº†åˆæ­¥äº†è§£ï¼Œæœ¬æ–‡ä¼šé€šè¿‡ä¸€äº›å®é™…æ¡ˆä¾‹åˆ†æå’Œå®è·µæ¥å¸®åŠ©ç†è§£ç†è®ºçŸ¥è¯†ã€‚</p>
<section id="linuxintel-rdt">
<h2>åœ¨Linuxä¸Šæ¿€æ´»Intel RDTèµ„æºç®¡ç†<a class="headerlink" href="#linuxintel-rdt" title="Link to this heading">ïƒ</a></h2>
<p>Linux 4.10ä»¥ä¸Šç‰ˆæœ¬å†…æ ¸æ”¯æŒIntel RDTæŠ€æœ¯ï¼ŒåŸºç¡€æ¶æ„æ˜¯åŸºäº <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> æ–‡ä»¶ç³»ç»Ÿæ¥å®ç°çš„ï¼Œæä¾›äº†ä¸€ä¸ªç”¨æˆ·æ¥å£ã€‚é€šå¸¸ç³»ç»Ÿç®¡ç†å‘˜å°±æ˜¯é€šè¿‡è¿™ä¸ª <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> ç”¨æˆ·æ¥å£æ¥åˆ†é…èµ„æºï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨å†…æ ¸æ¥é…ç½®QoS MSRsä»¥åŠtasksæˆ–CPUsçš„CLOSIDsã€‚å½“ä¸€ä¸ªCPUè°ƒåº¦ä»»åŠ¡è¿è¡Œæ—¶ï¼Œè¿™ä¸ªä»»åŠ¡çš„CLOSIDå°±è¢«åŠ è½½åˆ°PQR MSRä½œä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å½“ä»»åŠ¡è¿è¡Œæ—¶ï¼Œé€šè¿‡CLOSIDç´¢å¼•å½“CBMå°±ä¼šæŒ‡å®šè¿™ä¸ªä»»åŠ¡èƒ½å¤Ÿåˆ†é…çš„ç¼“å­˜ä»¥åŠé€šè¿‡ä¸€ä¸ªCLOSIDç´¢å¼•çš„æŒ‡å®šå»¶è¿Ÿå€¼æ¥åˆ†é…å†…å­˜å¸¦å®½ã€‚</p>
</section>
<section id="resctrl">
<h2>resctrlæ–‡ä»¶ç³»ç»Ÿ<a class="headerlink" href="#resctrl" title="Link to this heading">ïƒ</a></h2>
<p>å†…æ ¸å‚æ•° <code class="docutils literal notranslate"><span class="pre">CONFIG_INTEL_RDT_A</span></code> æ¿€æ´»RDTæ”¯æŒï¼Œå¹¶ä¸”éœ€è¦æœ‰å¤„ç†å™¨çš„ <code class="docutils literal notranslate"><span class="pre">/proc/cpuinfo</span></code> ä¸­flagï¼š <code class="docutils literal notranslate"><span class="pre">rdt</span></code> , <code class="docutils literal notranslate"><span class="pre">cat_l3</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">cdp_l3</span></code></p>
<ul>
<li><p>è¯·å…ˆ <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/proc/cpuinfo</span></code> æŸ¥çœ‹å¤„ç†å™¨æ˜¯å¦æ”¯æŒä¸Šè¿°å¼€å…³å‚æ•°:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">cpuinfo</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">flags</span>
</pre></div>
</div>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨ <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">Xeon</span> <span class="pre">Platinum</span> <span class="pre">8163</span> <span class="pre">CPU</span></code> å¤„ç†å™¨å¯ä»¥çœ‹åˆ°æ”¯æŒå‚æ•° <code class="docutils literal notranslate"><span class="pre">rdt_a</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">cdp_l3</span></code></p>
<ul>
<li><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿå’Œæ”¯æŒåŠŸèƒ½:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">-</span><span class="n">t</span> <span class="n">resctrl</span> <span class="n">resctrl</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="n">cdp</span><span class="p">]</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
</pre></div>
</div>
</li>
</ul>
<p>è¿™é‡Œ <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">cdp</span></code> æŒ‚è½½é€‰è´¤æ˜¯æ¿€æ´» L3 ç¼“å­˜åˆ†é…çš„ ç¼–ç /æ•°æ® ä¼˜å…ˆçº§ (code/data prioritization)</p>
<ul>
<li><p>æŒ‚è½½äº† <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> æ–‡ä»¶ç³»ç»Ÿåï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿä»¥ä¸‹ç›®å½•ç»“æ„:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
<span class="n">tree</span>
</pre></div>
</div>
</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»“æ„å¦‚ä¸‹:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
â”œâ”€â”€ cpus
â”œâ”€â”€ cpus_list
â”œâ”€â”€ info
â”‚   â”œâ”€â”€ L3
â”‚   â”‚   â”œâ”€â”€ cbm_mask
â”‚   â”‚   â”œâ”€â”€ min_cbm_bits
â”‚   â”‚   â”œâ”€â”€ num_closids
â”‚   â”‚   â””â”€â”€ shareable_bits
â”‚   â”œâ”€â”€ L3_MON
â”‚   â”‚   â”œâ”€â”€ max_threshold_occupancy
â”‚   â”‚   â”œâ”€â”€ mon_features
â”‚   â”‚   â””â”€â”€ num_rmids
â”‚   â””â”€â”€ MB
â”‚       â”œâ”€â”€ bandwidth_gran
â”‚       â”œâ”€â”€ delay_linear
â”‚       â”œâ”€â”€ min_bandwidth
â”‚       â””â”€â”€ num_closids
â”œâ”€â”€ mon_data
â”‚   â”œâ”€â”€ mon_L3_00
â”‚   â”‚   â”œâ”€â”€ llc_occupancy
â”‚   â”‚   â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚   â””â”€â”€ mbm_total_bytes
â”‚   â””â”€â”€ mon_L3_01
â”‚       â”œâ”€â”€ llc_occupancy
â”‚       â”œâ”€â”€ mbm_local_bytes
â”‚       â””â”€â”€ mbm_total_bytes
â”œâ”€â”€ mon_groups
â”œâ”€â”€ schemata
...
â”œâ”€â”€ system-stream
â”‚   â”œâ”€â”€ cpus
â”‚   â”œâ”€â”€ cpus_list
â”‚   â”œâ”€â”€ mon_data
â”‚   â”‚   â”œâ”€â”€ mon_L3_00
â”‚   â”‚   â”‚   â”œâ”€â”€ llc_occupancy
â”‚   â”‚   â”‚   â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚   â”‚   â””â”€â”€ mbm_total_bytes
â”‚   â”‚   â””â”€â”€ mon_L3_01
â”‚   â”‚       â”œâ”€â”€ llc_occupancy
â”‚   â”‚       â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚       â””â”€â”€ mbm_total_bytes
â”‚   â”œâ”€â”€ mon_groups
â”‚   â”œâ”€â”€ schemata
â”‚   â””â”€â”€ tasks
â”œâ”€â”€ system-agent
â”‚   â”œâ”€â”€ cpus
â”‚   â”œâ”€â”€ cpus_list
â”‚   â”œâ”€â”€ mon_data
â”‚   â”‚   â”œâ”€â”€ mon_L3_00
â”‚   â”‚   â”‚   â”œâ”€â”€ llc_occupancy
â”‚   â”‚   â”‚   â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚   â”‚   â””â”€â”€ mbm_total_bytes
â”‚   â”‚   â””â”€â”€ mon_L3_01
â”‚   â”‚       â”œâ”€â”€ llc_occupancy
â”‚   â”‚       â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚       â””â”€â”€ mbm_total_bytes
â”‚   â”œâ”€â”€ mon_groups
â”‚   â”œâ”€â”€ schemata
â”‚   â””â”€â”€ tasks
â”œâ”€â”€ system-critical
â”‚   â”œâ”€â”€ cpus
â”‚   â”œâ”€â”€ cpus_list
â”‚   â”œâ”€â”€ mon_data
â”‚   â”‚   â”œâ”€â”€ mon_L3_00
â”‚   â”‚   â”‚   â”œâ”€â”€ llc_occupancy
â”‚   â”‚   â”‚   â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚   â”‚   â””â”€â”€ mbm_total_bytes
â”‚   â”‚   â””â”€â”€ mon_L3_01
â”‚   â”‚       â”œâ”€â”€ llc_occupancy
â”‚   â”‚       â”œâ”€â”€ mbm_local_bytes
â”‚   â”‚       â””â”€â”€ mbm_total_bytes
â”‚   â”œâ”€â”€ mon_groups
â”‚   â”œâ”€â”€ schemata
â”‚   â””â”€â”€ tasks
â””â”€â”€ tasks
</pre></div>
</div>
</section>
<section id="id1">
<h2>resctrlç›®å½•ä»‹ç»<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h2>
<section id="info">
<h3>infoç›®å½•<a class="headerlink" href="#info" title="Link to this heading">ïƒ</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">info</span></code> ç›®å½•åŒ…å«äº†æ¿€æ´»èµ„æºçš„ä¿¡æ¯ï¼Œæ¯ä¸ªèµ„æºéƒ½æœ‰è‡ªå·±çš„å­ç›®å½•:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>â”œâ”€â”€ info
â”‚   â”œâ”€â”€ L3
â”‚   â”‚   â”œâ”€â”€ cbm_mask
â”‚   â”‚   â”œâ”€â”€ min_cbm_bits
â”‚   â”‚   â”œâ”€â”€ num_closids
â”‚   â”‚   â””â”€â”€ shareable_bits
â”‚   â”œâ”€â”€ L3_MON
â”‚   â”‚   â”œâ”€â”€ max_threshold_occupancy
â”‚   â”‚   â”œâ”€â”€ mon_features
â”‚   â”‚   â””â”€â”€ num_rmids
â”‚   â””â”€â”€ MB
â”‚       â”œâ”€â”€ bandwidth_gran
â”‚       â”œâ”€â”€ delay_linear
â”‚       â”œâ”€â”€ min_bandwidth
â”‚       â””â”€â”€ num_closids
</pre></div>
</div>
<p>å­ç›®å½•åå­—åæ˜ äº†èµ„æºåå­—ï¼Œæ¯ä¸ªå­ç›®å½•åŒ…å«äº†ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">num_closids</span></code> è¿™ä¸ªèµ„æºçš„CLOSIDsçš„æ•°é‡ï¼Œå†…æ ¸ä½¿ç”¨æ‰€æœ‰æ¿€æ´»èµ„æºçš„CLOSIDsçš„æœ€å°æ•°é‡ä½œä¸ºé™åˆ¶:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#cat num_closids</span>
<span class="mi">16</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cbm_mask</span></code> ä½æ©ç (bitmask)æ ¡éªŒè¿™ä¸ªèµ„æºï¼Œæ©ç ç­‰åŒ100%:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#cat cbm_mask</span>
<span class="mi">7</span><span class="n">ff</span>
</pre></div>
</div>
</li>
</ul>
<p>è¿™é‡Œ <code class="docutils literal notranslate"><span class="pre">7ff</span></code> æ˜¯16è¿›åˆ¶ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ <code class="docutils literal notranslate"><span class="pre">11111111111</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">min_cbm_bits</span></code> å½“å†™å…¥ä¸€ä¸ªæ©ç æ—¶å€™å¿…é¡»è®¾ç½®çš„è¿ç»­ä½(consecutive bits)çš„æœ€å°å€¼:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#cat min_cbm_bits</span>
<span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id2">
<h3>èµ„æºç»„<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h3>
<p>èµ„æºç»„å°±æ˜¯å¯¹åº” <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> æ–‡ä»¶ç³»ç»Ÿçš„å­ç›®å½•ã€‚é»˜è®¤èµ„æºç»„å°±æ˜¯ <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> rootç›®å½•ã€‚ç³»ç»Ÿç®¡ç†å‘˜é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">mkdir</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">rmdir</span></code> å‘½ä»¤åœ¨è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºå­ç›®å½•æ¥ç®¡ç†èµ„æºç»„ã€‚</p>
<p>åœ¨æ¯ä¸ªèµ„æºç»„ä¸­æœ‰4ä¸ªæ–‡ä»¶:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tasks</span></code> : å±äºè¿™ä¸ªèµ„æºç»„çš„æ‰€æœ‰ä»»åŠ¡(è¿›ç¨‹å’Œçº¿ç¨‹)ï¼Œé€šè¿‡å°†task IDå†™åˆ°è¿™ä¸ªæ–‡ä»¶æˆ–åˆ é™¤ï¼Œå¯ä»¥æ§åˆ¶ä»»åŠ¡æ˜¯å¦å±äºè¿™ä¸ªèµ„æºç»„ã€‚å½“ä¸€ä¸ªä»»åŠ¡åŠ å…¥ä¸€ä¸ªèµ„æºç»„ï¼Œåˆ™ä¼šè‡ªåŠ¨ä»ä¹‹å‰çš„èµ„æºç»„ä¸­ç§»é™¤ã€‚ä¸€ä¸ªé€šè¿‡ <code class="docutils literal notranslate"><span class="pre">fork</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">clone</span></code> å‘½ä»¤åˆ›å»ºçš„ä»»åŠ¡è‡ªåŠ¨æ·»åŠ åˆ°çˆ¶ä»»åŠ¡æ‰€å±èµ„æºç»„ã€‚å¦‚æœä¸€ä¸ªPIDä¸å±äºä»»ä½•èµ„æºç»„(subpartition)ï¼Œåˆ™è‡ªåŠ¨å±äºrootèµ„æºç»„(é»˜è®¤partition)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpus</span></code> : ä½¿ç”¨ä½æ©ç (bitmask)æ¥è¡¨ç¤ºå±äºè¿™ä¸ªèµ„æºç»„çš„é€»è¾‘CPUï¼Œæ·»åŠ åˆ°èµ„æºç»„çš„CPUä¼šè‡ªåŠ¨ä»ä¹‹å‰çš„èµ„æºç»„ä¸­ç§»é™¤ã€‚è¢«ç§»é™¤çš„CPUä¼šæ·»åŠ åˆ°é»˜è®¤(root)èµ„æºç»„ã€‚ä½ ä¸èƒ½ä»é»˜è®¤èµ„æºç»„ç§»é™¤CPUã€‚æ³¨æ„ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨16è¿›åˆ¶bitmask</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpus_list</span></code> : å’Œ <code class="docutils literal notranslate"><span class="pre">cpus</span></code> æ˜¯ç›¸åŒä½œç”¨ï¼Œç”¨æ¥è¡¨ç¤ºåˆ†é…åˆ°CPUï¼Œä¸è¿‡è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨çš„æ˜¯åè¿›åˆ¶</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schemata</span></code> : é…ç½®èµ„æºç»„æ‰€æœ‰èµ„æºï¼Œæ¯ä¸ªèµ„æºæœ‰ä¸€è¡Œé…ç½®å’Œæ ¼å¼</p></li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹é»˜è®¤çš„æ ¹èµ„æºç»„é…ç½®:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#cat cpus</span>
<span class="mi">0000</span><span class="p">,</span><span class="n">ffffffff</span><span class="p">,</span><span class="n">ffffffff</span><span class="p">,</span><span class="n">ffffffff</span>

<span class="c1">#cat cpus_list</span>
<span class="mi">0</span><span class="o">-</span><span class="mi">95</span>

<span class="c1">#cat schemata</span>
    <span class="n">L3</span><span class="p">:</span><span class="mi">0</span><span class="o">=</span><span class="mi">7</span><span class="n">ff</span><span class="p">;</span><span class="mi">1</span><span class="o">=</span><span class="mi">7</span><span class="n">ff</span>
    <span class="n">MB</span><span class="p">:</span><span class="mi">0</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="mi">1</span><span class="o">=</span><span class="mi">100</span>
</pre></div>
</div>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ° <code class="docutils literal notranslate"><span class="pre">cpus</span></code> é…ç½®ä¸­16è¿›åˆ¶è½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ <code class="docutils literal notranslate"><span class="pre">96ä¸ª1</span></code> ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”æœåŠ¡å™¨çš„ <code class="docutils literal notranslate"><span class="pre">Intel(R)</span> <span class="pre">Xeon(R)</span> <span class="pre">Platinum</span> <span class="pre">8163</span> <span class="pre">CPU</span> <span class="pre">&#64;</span> <span class="pre">2.50GHz</span></code> å¤„ç†å™¨çš„96ä¸ªé€»è¾‘CPUï¼Œå®é™…ä¸Šå’Œ <code class="docutils literal notranslate"><span class="pre">cpus_list</span></code> é…ç½®å†…å®¹ <code class="docutils literal notranslate"><span class="pre">0-95</span></code> æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>è¿™é‡Œ <code class="docutils literal notranslate"><span class="pre">schemata</span></code> é…ç½®æ˜¯é»˜è®¤çš„é…ç½® <code class="docutils literal notranslate"><span class="pre">7ff</span></code> (16è¿›åˆ¶) è½¬æ¢æˆäºŒè¿›åˆ¶æ˜¯ <code class="docutils literal notranslate"><span class="pre">1111111</span></code></p>
<p>å¯¹äºè¿è¡Œä»»åŠ¡çš„èµ„æºåˆ†é…è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p>å¦‚æœä»»åŠ¡å±äºéé»˜è®¤èµ„æºç»„ï¼Œåˆ™ä½¿ç”¨è¯¥ç»„çš„schemata</p></li>
<li><p>å¦‚æœä¸€ä¸ªä»»åŠ¡å±äºé»˜è®¤èµ„æºç»„ï¼Œä½†æ˜¯å®ƒè¿è¡Œåœ¨è¢«æŒ‡å®šç»™ç‰¹å®šèµ„æºç»„çš„CPUæ˜¯ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªCPUçš„èµ„æºç»„é…ç½®çš„schemata(ä¹Ÿå°±æ˜¯é™åˆ¶è¯¥ä»»åŠ¡çš„å¯ç”¨èµ„æº)</p></li>
<li><p>å…¶ä»–æƒ…å†µåˆ™ä½¿ç”¨é»˜è®¤èµ„æºç»„çš„schemata</p></li>
</ul>
</section>
</section>
<section id="schemata">
<h2>schemataæ–‡ä»¶é€šç”¨æ¦‚å¿µ<a class="headerlink" href="#schemata" title="Link to this heading">ïƒ</a></h2>
<p>åœ¨ <code class="docutils literal notranslate"><span class="pre">schemata</span></code> æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæè¿°ä¸€ä¸ªèµ„æºã€‚é…ç½®è¡Œä»¥èµ„æºçš„åå­—å¼€å§‹ï¼Œå¯¹åº”çš„æŒ‡å®šå€¼å°±æ˜¯ä½œç”¨åœ¨è¿™ä¸ªç³»ç»Ÿèµ„æºçš„æ¯ä¸ªä¼šè¯ã€‚</p>
<section id="cache-ids-id">
<h3>Cache IDs (ç¼“å­˜ID)<a class="headerlink" href="#cache-ids-id" title="Link to this heading">ïƒ</a></h3>
<p>ç°åœ¨é€šç”¨Intelç³»ç»Ÿåœ¨æ¯ä¸ª socket åŒ…å«ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">L3</span></code> ç¼“å­˜ï¼Œå¹¶ä¸”æ¯ä¸ªç‰©ç†æ ¸å¿ƒ(core)çš„è¶…çº¿ç¨‹(hyperthreads)å…±äº«ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">L2</span></code> ç¼“å­˜ã€‚åœ¨ä¸€ä¸ªsocketä¸­æˆ‘ä»¬å¯ä»¥æœ‰å¤šä¸ªç‹¬ç«‹çš„ <code class="docutils literal notranslate"><span class="pre">L3</span></code> ç¼“å­˜ï¼Œä»¥åŠå¤šä¸ªç‰©ç†æ ¸å¿ƒå…±äº«ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">L2</span></code> ç¼“å­˜ã€‚è¿™ç§CPUæ¶æ„å†³å®šäº†ä¸€ç»„é€»è¾‘CPUå¦‚ä½•å…±äº«èµ„æºï¼Œæ‰€ä»¥å°±ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">Cache</span> <span class="pre">ID</span></code> æ¥è¡¨ç¤ºã€‚åœ¨ä¸€ä¸ªç»™å®šçš„ç¼“å­˜å±‚ï¼Œå¯¹äºæ•´ä¸ªç³»ç»Ÿåªä½¿ç”¨ä¸€ä¸ªå”¯ä¸€æ ‡è¯†çš„æ•°å­—(ä½†æ˜¯ä¸ä¿è¯æ•°å­—æ˜¯è¿ç»­çš„)ã€‚ä¸ºäº†æ‰¾å‡ºæ¯ä¸ªé€»è¾‘CPUçš„IDï¼Œè¯·æŸ¥çœ‹ <code class="docutils literal notranslate"><span class="pre">/sys/devices/system/cpu/cpu*/cache/index*/id</span></code> ã€‚</p>
</section>
<section id="cache-bit-masks-cbm">
<h3>Cache Bit Masks(CBM)<a class="headerlink" href="#cache-bit-masks-cbm" title="Link to this heading">ïƒ</a></h3>
<p>å¯¹äºæ¯ä¸ªç¼“å­˜èµ„æºï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªbitmask(ä½æ©ç )æ¥æè¿°è¿™ä¸ªç¼“å­˜çš„ä»½é¢(portion)ã€‚å¯¹äºæ¯ä¸ªCPUå‹å·(ä¸åŒçš„ç¼“å­˜å±‚å¯èƒ½ä¸åŒ)å®šä¹‰äº†maskçš„æœ€å¤§å€¼ã€‚è¿™ä¸ªå€¼ä½¿ç”¨CPUIDå°±å¯ä»¥æ‰¾åˆ°ï¼Œä¸è¿‡ä¹Ÿé€šè¿‡ <code class="docutils literal notranslate"><span class="pre">resctrl</span></code> æ–‡ä»¶ç³»ç»Ÿçš„ <code class="docutils literal notranslate"><span class="pre">info</span></code> ç›®å½•ä¸‹é…ç½®æ–‡ä»¶ <code class="docutils literal notranslate"><span class="pre">info/{resource}/cbm_mask</span></code> å¯ä»¥æŸ¥çœ‹ã€‚ä¸¾ä¾‹ï¼Œæˆ‘ä»¬æŸ¥çœ‹ <code class="docutils literal notranslate"><span class="pre">L3</span></code> ç¼“å­˜:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span><span class="o">/</span><span class="n">info</span><span class="o">/</span><span class="n">L3</span><span class="o">/</span><span class="n">cbm_mask</span>
</pre></div>
</div>
<p>å¯ä»¥çœ‹åˆ°è¾“å‡º:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">7</span><span class="n">ff</span>
</pre></div>
</div>
<p>ä¸Šè¿°åå…­è¿›åˆ¶ <code class="docutils literal notranslate"><span class="pre">7ff</span></code> è½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ 11111111111 (11ä¸ª1) ï¼Œè¿™æ˜¯é»˜è®¤é…ç½®ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ç¼“å­˜çš„æ‰€æœ‰éƒ¨åˆ†(éƒ½æ˜¯1)éƒ½å¯ä»¥è®¿é—®</p>
<p>åœ¨Intel RDTæ¶æ„ä¸­ï¼Œä½¿ç”¨è¿™äº›ä½æ©ç (bit masks)æ¥åœ¨ä¸€ä¸ªç›¸é‚»å—è®¾ç½® <code class="docutils literal notranslate"><span class="pre">1</span></code> æ•°å­—ã€‚è¿™æ ·åå…­è¿›åˆ¶ <code class="docutils literal notranslate"><span class="pre">0x3</span></code> (11) <code class="docutils literal notranslate"><span class="pre">0x6</span></code> (110ï¼‰ å’Œ <code class="docutils literal notranslate"><span class="pre">0xC</span></code> (1100) å°±æ˜¯è¡¨ç¤º2ä½é›†ï¼Œè€Œ <code class="docutils literal notranslate"><span class="pre">0x5</span></code> (101) <code class="docutils literal notranslate"><span class="pre">0x9</span></code> (1001) å’Œ <code class="docutils literal notranslate"><span class="pre">0xA</span></code> (1010) å°±ä¸æ˜¯ã€‚åœ¨ä¸€ä¸ªä½¿ç”¨20ä½æ©ç çš„ç³»ç»Ÿï¼Œæ¯ä¸€ä½è¡¨ç¤ºç¼“å­˜çš„ <code class="docutils literal notranslate"><span class="pre">5%</span></code> ã€‚ä½ å¯ä»¥å°†ç¼“å­˜åˆ’åˆ†æˆç›¸ç­‰çš„4éƒ¨åˆ†ï¼Œä½¿ç”¨ä»¥ä¸‹æ©ç  <code class="docutils literal notranslate"><span class="pre">0x1f</span></code> (11111) , <code class="docutils literal notranslate"><span class="pre">0x3e0</span></code> (1111100000) , <code class="docutils literal notranslate"><span class="pre">0x7c00</span></code> (111110000000000), <code class="docutils literal notranslate"><span class="pre">0xf8000</span></code> (11111000000000000000)</p>
</section>
<section id="l3-code-data">
<h3>L3ç¼“å­˜è¯¦æƒ…(å…³é—­äº†code/dataä¼˜å…ˆçº§)<a class="headerlink" href="#l3-code-data" title="Link to this heading">ïƒ</a></h3>
<p>å½“CDPç¦ç”¨æ—¶ï¼ŒL3çš„schemataæ ¼å¼å¦‚ä¸‹:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L3</span><span class="p">:</span><span class="o">&lt;</span><span class="n">cache_id0</span><span class="o">&gt;=&lt;</span><span class="s1">&#39;cbm&gt;;&lt;cache_id1&gt;=&lt;cbm&gt;;...</span>
</pre></div>
</div>
</section>
<section id="l3-resctrlcdp">
<h3>L3ç¼“å­˜è¯¦æƒ…(é€šè¿‡resctrlæŒ‚è½½å‚æ•°å¯ç”¨äº†CDP)<a class="headerlink" href="#l3-resctrlcdp" title="Link to this heading">ïƒ</a></h3>
<p>å½“æ¿€æ´»äº†CDPæ—¶å€™ï¼ŒL3ç¼“å­˜ä¼šåˆ’åˆ†æˆ2ä¸ªç‹¬ç«‹éƒ¨åˆ†:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L3data</span><span class="p">:</span><span class="o">&lt;</span><span class="n">cache_id0</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">&lt;</span><span class="n">cache_id1</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">...</span>
<span class="n">L3code</span><span class="p">:</span><span class="o">&lt;</span><span class="n">cache_id0</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">&lt;</span><span class="n">cache_id1</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">...</span>
</pre></div>
</div>
</section>
<section id="l2">
<h3>L2ç¼“å­˜è¯¦æƒ…<a class="headerlink" href="#l2" title="Link to this heading">ïƒ</a></h3>
<p>L2ç¼“å­˜ä¸æ”¯æŒä»£ç å’Œæ•°æ®ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥schemataå§‹ç»ˆå¦‚ä¸‹:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L2</span><span class="p">:</span><span class="o">&lt;</span><span class="n">cache_id0</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">&lt;</span><span class="n">cache_id1</span><span class="o">&gt;=&lt;</span><span class="n">cbm</span><span class="o">&gt;</span><span class="p">;</span><span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="rdt">
<h2>RDTé…ç½®æ¡ˆä¾‹<a class="headerlink" href="#rdt" title="Link to this heading">ïƒ</a></h2>
<section id="id3">
<h3>æ¡ˆä¾‹1<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h3>
<p>åœ¨ä½¿ç”¨åŒsocketçš„ä¸»æœº(æ¯ä¸ªsocketä¸€ä¸ªL3ç¼“å­˜)ï¼Œä½¿ç”¨4ä½çš„ç¼“å­˜ä½æ©ç :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">-</span><span class="n">t</span> <span class="n">resctrl</span> <span class="n">resctrl</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
<span class="n">mkdir</span> <span class="n">p0</span> <span class="n">p1</span>
<span class="n">echo</span> <span class="s2">&quot;L3:0=3;1=c&quot;</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span><span class="o">/</span><span class="n">p0</span><span class="o">/</span><span class="n">schemata</span>
<span class="n">echo</span> <span class="s2">&quot;L3:0=3;1=3&quot;</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span><span class="o">/</span><span class="n">p1</span><span class="o">/</span><span class="n">schemata</span>
</pre></div>
</div>
<p>è¿›åˆ¶è½¬æ¢è¯´æ˜ :</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>16è¿›åˆ¶</p></th>
<th class="head"><p>2è¿›åˆ¶</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3</p></td>
<td><p>11</p></td>
</tr>
<tr class="row-odd"><td><p>c</p></td>
<td><p>1100</p></td>
</tr>
</tbody>
</table>
<p>é»˜è®¤çš„èµ„æºç»„æ²¡æœ‰ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰ç¼“å­˜çš„æ‰€æœ‰éƒ¨åˆ†(ä¹Ÿå°±æ˜¯åœ¨ root æ ¹ä¸Šçš„ <code class="docutils literal notranslate"><span class="pre">schemata</span></code> é…ç½®å€¼æ˜¯é»˜è®¤çš„ <code class="docutils literal notranslate"><span class="pre">L3:0=f;1=f</span></code> )</p>
<p>ä¸Šè¿°ä¿®æ”¹ä»¥åï¼Œåˆ†é…åˆ° <code class="docutils literal notranslate"><span class="pre">p0</span></code> èµ„æºç»„çš„è¿›ç¨‹ï¼Œå°±åªèƒ½åˆ†é…åˆ° cache ID 0çš„ä½ä½50% (3) å’Œ cache ID 1çš„é«˜ä½50% (c) ï¼›è€Œåˆ†é…åˆ° <code class="docutils literal notranslate"><span class="pre">p1</span></code> èµ„æºç»„çš„è¿›ç¨‹ï¼Œå°±èƒ½å¤Ÿä½¿ç”¨ä¸¤ä¸ªsocketä¸­ç¼“å­˜çš„ä½ä½50% (éƒ½æ˜¯3) ã€‚</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/l3_schemata_1.png"><img alt="../../../../_images/l3_schemata_1.png" src="../../../../_images/l3_schemata_1.png" style="width: 449.6px; height: 120.80000000000001px;" /></a>
</figure>
</section>
<section id="id4">
<h3>æ¡ˆä¾‹2<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h3>
<p>è¿™ä¸ªæ¡ˆä¾‹ä¾ç„¶æ˜¯åŒsocketså¤„ç†å™¨ï¼Œä½†æ˜¯é…ç½®æ˜¯æ›´ä¸ºçœŸå®çš„20ä½maskã€‚</p>
<p>ä¸¤ä¸ªå®æ—¶ä»»åŠ¡ï¼Œ <code class="docutils literal notranslate"><span class="pre">pid=1234</span></code> è¿è¡Œåœ¨å¤„ç†å™¨0ï¼Œ <code class="docutils literal notranslate"><span class="pre">pid=5678</span></code> è¿è¡Œåœ¨å¤„ç†å™¨1ï¼Œè¿™ä¸¤ä¸ªå¤„ç†å™¨æ ¸å¿ƒéƒ½æ˜¯ä¸€ä¸ªåŒsocketçš„socket 0ä¸Šï¼Œå¹¶ä¸”æ˜¯åŒæ ¸å¿ƒä¸»æœºã€‚ä¸ºäº†é¿å… noisy neighbors ï¼Œè¿™ä¸¤ä¸ªå®æ—¶tasksè¦é…ç½®å„è‡ªç‹¬å socket 0çš„L3ç¼“å­˜çš„1/4</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">-</span><span class="n">t</span> <span class="n">resctrl</span> <span class="n">resctrl</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">resctrl</span>
</pre></div>
</div>
<ul>
<li><p>é¦–å…ˆè®¾ç½®é»˜è®¤ç»„æœ€å¤šå ç”¨socket 0çš„L3ç¼“å­˜æœ€å¤š 50%</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;L3:0=3ff;1=fffff&quot;</span> <span class="o">&gt;</span> <span class="n">schemata</span>
</pre></div>
</div>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">3ff</span></code> ç›¸å½“äº 11,1111,1111</p>
<ul>
<li><p>ç„¶åæˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ä¸ªèµ„æºç»„ï¼Œå¹¶è®¾ç½®è®¿é—®socket 0çš„é«˜ 25%</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">p0</span>
<span class="n">echo</span> <span class="s2">&quot;L3:0=f8000;1=fffff&quot;</span> <span class="o">&gt;</span> <span class="n">p0</span><span class="o">/</span><span class="n">schemata</span>
</pre></div>
</div>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">f8000</span></code> ç›¸å½“äº 1111,1000,0000,0000,0000 : è¿™æ ·æˆ‘ä»¬å°±æ˜¯é…ç½®äº† socket 0 çš„L3 ç¼“å­˜çš„æœ€é«˜ 25% (1/4) ç©ºé—´ç»™ socket 0</p>
<ul>
<li><p>æœ€åï¼Œæˆ‘ä»¬å°†è¿›ç¨‹åŠ å…¥åˆ° tasks ä¸­:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="mi">1234</span> <span class="o">&gt;</span> <span class="n">p0</span><span class="o">/</span><span class="n">tasks</span>
</pre></div>
</div>
</li>
</ul>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ£€æŸ¥:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">taskset</span> <span class="o">-</span><span class="n">cp</span> <span class="mi">1</span> <span class="mi">1234</span>
</pre></div>
</div>
<ul>
<li><p>åŒæ ·æˆ‘ä»¬é…ç½®ç¬¬äºŒä¸ªå®æ—¶ä»»åŠ¡:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">p1</span>
<span class="n">echo</span> <span class="s2">&quot;L3:0=7c00;1=fffff&quot;</span> <span class="o">&gt;</span> <span class="n">p1</span><span class="o">/</span><span class="n">schemata</span>
<span class="n">echo</span> <span class="mi">5678</span> <span class="o">&gt;</span> <span class="n">p1</span><span class="o">/</span><span class="n">tasks</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">cp</span> <span class="mi">2</span> <span class="mi">5678</span>
</pre></div>
</div>
</li>
</ul>
<p>æœ€ç»ˆç»“æœå›¾ç¤ºå¦‚ä¸‹:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/l3_schemata_2.png"><img alt="../../../../_images/l3_schemata_2.png" src="../../../../_images/l3_schemata_2.png" style="width: 528.8000000000001px; height: 128.0px;" /></a>
</figure>
</section>
<section id="id5">
<h3>æ¡ˆä¾‹3<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h3>
<p>æœ¬æ¡ˆä¾‹æ˜¯ä¸€ä¸ªå•socketç³»ç»Ÿï¼Œ</p>
</section>
</section>
<section id="id6">
<h2>å‚è€ƒ<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://01.org/group/4685/blogs">RESOURCE ALLOCATION IN INTELÂ® RESOURCE DIRECTOR TECHNOLOGY</a></p></li>
<li><p>å¦‚æœä½ è¦è¿›è¡Œæ•°å­—è¿›åˆ¶è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ <a class="reference external" href="https://www.sojson.com/hexconvert.html">åœ¨çº¿è¿›åˆ¶è½¬æ¢å·¥å…·</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="intel_rdt_arch.html" class="btn btn-neutral float-left" title="Intelèµ„æºè°ƒé…æŠ€æœ¯(Intel RDT)æ¶æ„" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="../intel_qat/index.html" class="btn btn-neutral float-right" title="Intel QuickAssist æŠ€æœ¯(Intel QAT)" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">ç‰ˆæƒæ‰€æœ‰</a> 2018 - now, Huatai Huangã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
  
    <!-- your html code here -->
    <br>
    <p><a href="https://github.com/huataihuang/cloud-atlas/issues">ç•™è¨€å’Œè®¨è®º</a>|<a href="https://github.com/huataihuang/cloud-atlas/blob/master/source/donate.rst">è¯·æˆ‘å–ä¸€æ¯å’–å•¡ ğŸ‘ˆ</a></p>
    <br>
    <p>ç½‘ç«™é‡‡ç”¨ <a href="https://utteranc.es/">utterances</a> è¯„è®ºç³»ç»Ÿï¼Œæ‰€æœ‰è¯„è®ºå­˜å‚¨åœ¨<a href="https://github.com/huataihuang/cloud-atlas/issues">GitHub issues</a> ä¸­ï¼Œå¦‚æœä½ çœ‹ä¸åˆ°ä¸‹æ–¹çš„è¯„è®ºæ¡†ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦<a href="https://cloud-atlas.readthedocs.io/zh-cn/latest/linux/security/vpn/index.html">è‡ªå¤‡æ¢¯å­</a> ğŸ‘ˆ</p>
    <div class="articleComments">
        <comments>
  <script src="https://utteranc.es/client.js"
    repo="huataihuang/cloud-atlas"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</comments>
    </div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>